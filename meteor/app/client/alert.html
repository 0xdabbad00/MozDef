<!--
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
Copyright (c) 2014 Mozilla Corporation

Contributors:
Jeff Bryner jbryner@mozilla.com
Anthony Verez averez@mozilla.com
-->

<template name="alertdetail">
<div class="container">
    <div class="row center">
        <div id="alert" >

            <table class="table table-reactive table-hover table-condensed" id="alert-table">
                <thead>
                    <tr>
                        <td class="upperwhite">Timestamp</td>
                        <td class="upperwhite">Links</td>
                        <td class="upperwhite">Severity</td>
                        <td class="upperwhite">Category</td>
                        <td class="upperwhite">Summary</td>
                    </tr>
                </thead>
                <tbody>
			<tr>
				<td>{{utctimestamp}}</td>
                <td><a target="_blank" href="{{kibanaurl}}">open in kibana</a></td>
				<td>{{severity}}</td>
				<td>{{category}}</td>
                <td>{{summary}}</td>
			</tr>
                </tbody>
            </table>
        </div>
    </div>
    {{#each this.events}}
        <div class="row center">{{>alert_event}}</div>
    {{/each}}
    
   
</div>

</template>


<!--each individual event -->
<template name="alert_event">
    <table class="table table-reactive table-hover table-condensed" id="alert-events-table">
        <tr>
            <td>{{documentindex}}</td>
            <td>{{documentid}}</td>
            <td>{{documenttype}}</td>
            <td>{{documentsource.summary}}</td>
        </tr>
        {{#each objKeyValue this.documentsource.details}}

            {{#if isAnObject value}}
                <tr><td>{{key}}</td>
                {{#with value}}
                    {{#each objKeyValue this}}
                        <td>{{key}}:</td>
                        <td>{{value}}</td>                    
                    {{/each}}
                {{/with}}
                </tr>
            {{else}}
                <tr>
                    <td>{{key}}:</td>
                    <td>{{value}}</td>
                </tr>            
            {{/if}}
        {{/each}}
    </table>
</template>
